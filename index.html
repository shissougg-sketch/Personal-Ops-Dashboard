<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Personal Ops Dashboard</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; }
.top-nav { background: white; height: 60px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; align-items: center; padding: 0 20px; position: fixed; top: 0; left: 0; right: 0; z-index: 100; }
.logo { font-size: 24px; font-weight: bold; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.menu-btn { display: none; background: none; border: none; font-size: 28px; cursor: pointer; margin-left: auto; }
.sidebar { position: fixed; left: 0; top: 60px; bottom: 0; width: 250px; background: white; box-shadow: 2px 0 10px rgba(0,0,0,0.1); padding: 20px 0; transition: transform 0.3s; }
.nav-item { padding: 12px 20px; cursor: pointer; transition: all 0.3s; }
.nav-item:hover { background: #f8f9fa; }
.nav-item.active { background: #667eea; color: white; }
.main-content { margin-left: 250px; margin-top: 60px; padding: 30px; min-height: calc(100vh - 60px); }
@media (max-width: 768px) {
.menu-btn { display: block; }
.sidebar { transform: translateX(-100%); z-index: 99; }
.sidebar.open { transform: translateX(0); }
.main-content { margin-left: 0; padding: 15px; }
.stats-grid { grid-template-columns: 1fr 1fr; gap: 10px; }
.stat-card { padding: 15px; }
.stat-number { font-size: 24px; }
.card { padding: 15px; }
.item { flex-direction: column; align-items: flex-start; gap: 10px; }
.modal-content { width: 95%; padding: 20px; }
button { margin-bottom: 10px; }
}
.page { display: none; }
.page.active { display: block; }
.card { background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
.stat-card { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 25px; border-radius: 10px; }
.stat-number { font-size: 36px; font-weight: bold; margin: 10px 0; }
input, textarea, select { width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px; margin-bottom: 15px; }
button { background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin-right: 10px; }
button:hover { background: #5568d3; }
.btn-danger { background: #dc3545; }
.item { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
.modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
.modal.active { display: flex; }
.modal-content { background: white; padding: 30px; border-radius: 10px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; }
.close { float: right; font-size: 24px; cursor: pointer; }
label { display: block; margin-bottom: 5px; font-weight: 500; }
h2 { margin-bottom: 20px; color: #667eea; }
</style>
</head>
<body>

<div class="top-nav">
<div class="logo">‚ö° Personal Ops</div>
<button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
</div>

<div class="sidebar" id="sidebar">
<div class="nav-item active" onclick="show('home')">üè† Home</div>
<div class="nav-item" onclick="show('tasks')">‚úÖ Tasks</div>
<div class="nav-item" onclick="show('workout')">üí™ Workout</div>
<div class="nav-item" onclick="show('budget')">üí∞ Budget</div>
<div class="nav-item" onclick="show('notes')">üìù Notes</div>
<div class="nav-item" onclick="show('settings')">‚öôÔ∏è Settings</div>
</div>

<div class="main-content">

<div id="home" class="page active">
<h2>Dashboard</h2>
<div class="stats-grid">
<div class="stat-card"><div>Tasks Due</div><div class="stat-number" id="stat1">0</div></div>
<div class="stat-card"><div>Workouts Week</div><div class="stat-number" id="stat2">0</div></div>
<div class="stat-card"><div>Budget Left</div><div class="stat-number" id="stat3">$0</div></div>
<div class="stat-card"><div>Notes</div><div class="stat-number" id="stat4">0</div></div>
</div>
</div>

<div id="tasks" class="page">
<h2>Tasks</h2>
<div class="card">
<button onclick="openModal('task')">+ Add Task</button>
<div id="taskList"></div>
</div>
</div>

<div id="workout" class="page">
<h2>Workouts</h2>
<div class="card">
<button onclick="openModal('workout')">+ Log Workout</button>
<div id="workoutList"></div>
</div>
</div>

<div id="budget" class="page">
<h2>Budget</h2>
<div class="card">
<button onclick="openModal('income')">+ Income</button>
<button onclick="openModal('expense')">+ Expense</button>
<p>Income: $<span id="inc">0</span> | Expenses: $<span id="exp">0</span> | Balance: $<span id="bal">0</span></p>
<div id="budgetList"></div>
</div>
</div>

<div id="notes" class="page">
<h2>Notes</h2>
<div class="card">
<button onclick="openModal('note')">+ New Note</button>
<div id="noteList"></div>
</div>
</div>

<div id="settings" class="page">
<h2>Settings</h2>
<div class="card">
<button onclick="exp()">Export Data</button>
<button onclick="document.getElementById('imp').click()">Import Data</button>
<input type="file" id="imp" style="display:none" onchange="imp(event)">
<button class="btn-danger" onclick="clear()">Clear All</button>
</div>
</div>

</div>

<div id="modal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeModal()">&times;</span>
<div id="modalContent"></div>
</div>
</div>

<script>
let d = { tasks: [], workouts: [], budget: [], notes: [] };
let type = '';

function load() {
const s = localStorage.getItem('ops');
if (s) d = JSON.parse(s);
update();
}

function save() {
localStorage.setItem('ops', JSON.stringify(d));
}

function show(id) {
document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
document.getElementById(id).classList.add('active');
event.target.classList.add('active');
if (window.innerWidth <= 768) {
document.getElementById('sidebar').classList.remove('open');
}
if (id === 'tasks') rTasks();
if (id === 'workout') rWorkouts();
if (id === 'budget') rBudget();
if (id === 'notes') rNotes();
if (id === 'home') update();
}

function toggleMenu() {
document.getElementById('sidebar').classList.toggle('open');
}

function openModal(t) {
type = t;
let h = '';
if (t === 'task') h = '<h3>Add Task</h3><input id="i1" placeholder="Title"><input id="i2" type="date"><button onclick="saveTask()">Save</button>';
if (t === 'workout') h = '<h3>Log Workout</h3><input id="i1" placeholder="Name"><input id="i2" type="number" placeholder="Minutes"><button onclick="saveWorkout()">Save</button>';
if (t === 'income' || t === 'expense') h = '<h3>Add ' + t + '</h3><input id="i1" placeholder="Category"><input id="i2" type="number" placeholder="Amount"><button onclick="saveBudget()">Save</button>';
if (t === 'note') h = '<h3>New Note</h3><input id="i1" placeholder="Title"><textarea id="i2" rows="5" placeholder="Content"></textarea><button onclick="saveNote()">Save</button>';
document.getElementById('modalContent').innerHTML = h;
document.getElementById('modal').classList.add('active');
}

function closeModal() {
document.getElementById('modal').classList.remove('active');
}

function saveTask() {
const t = document.getElementById('i1').value;
const du = document.getElementById('i2').value;
if (!t) return alert('Enter title');
d.tasks.push({ id: Date.now(), title: t, due: du, done: false });
save();
closeModal();
rTasks();
}

function saveWorkout() {
const n = document.getElementById('i1').value;
const m = document.getElementById('i2').value;
if (!n || !m) return alert('Fill all');
d.workouts.push({ id: Date.now(), name: n, mins: m, date: new Date().toISOString().split('T')[0] });
save();
closeModal();
rWorkouts();
}

function saveBudget() {
const c = document.getElementById('i1').value;
const a = parseFloat(document.getElementById('i2').value);
if (!c || !a) return alert('Fill all');
d.budget.push({ id: Date.now(), type: type, cat: c, amt: a, date: new Date().toISOString().split('T')[0] });
save();
closeModal();
rBudget();
}

function saveNote() {
const t = document.getElementById('i1').value;
const c = document.getElementById('i2').value;
if (!t || !c) return alert('Fill all');
d.notes.push({ id: Date.now(), title: t, content: c });
save();
closeModal();
rNotes();
}

function rTasks() {
const h = d.tasks.map(t => '<div class="item"><div><input type="checkbox" ' + (t.done ? 'checked' : '') + ' onchange="toggle(' + t.id + ')"> ' + t.title + (t.due ? ' - ' + t.due : '') + '</div><button class="btn-danger" onclick="del(\'tasks\',' + t.id + ')">Del</button></div>').join('');
document.getElementById('taskList').innerHTML = h || '<p>No tasks</p>';
}

function rWorkouts() {
const h = d.workouts.map(w => '<div class="item"><div>' + w.name + ' - ' + w.mins + ' min (' + w.date + ')</div><button class="btn-danger" onclick="del(\'workouts\',' + w.id + ')">Del</button></div>').join('');
document.getElementById('workoutList').innerHTML = h || '<p>No workouts</p>';
}

function rBudget() {
const inc = d.budget.filter(b => b.type === 'income').reduce((s, b) => s + b.amt, 0);
const exp = d.budget.filter(b => b.type === 'expense').reduce((s, b) => s + b.amt, 0);
document.getElementById('inc').textContent = inc.toFixed(2);
document.getElementById('exp').textContent = exp.toFixed(2);
document.getElementById('bal').textContent = (inc - exp).toFixed(2);
const h = d.budget.map(b => '<div class="item"><div>' + b.cat + ' - $' + b.amt.toFixed(2) + ' (' + b.type + ', ' + b.date + ')</div><button class="btn-danger" onclick="del(\'budget\',' + b.id + ')">Del</button></div>').join('');
document.getElementById('budgetList').innerHTML = h || '<p>No transactions</p>';
}

function rNotes() {
const h = d.notes.map(n => '<div class="item"><div>' + n.title + '<br><small>' + n.content.substring(0, 50) + '...</small></div><button class="btn-danger" onclick="del(\'notes\',' + n.id + ')">Del</button></div>').join('');
document.getElementById('noteList').innerHTML = h || '<p>No notes</p>';
}

function toggle(id) {
const t = d.tasks.find(t => t.id === id);
t.done = !t.done;
save();
rTasks();
}

function del(arr, id) {
if (!confirm('Delete?')) return;
d[arr] = d[arr].filter(i => i.id !== id);
save();
if (arr === 'tasks') rTasks();
if (arr === 'workouts') rWorkouts();
if (arr === 'budget') rBudget();
if (arr === 'notes') rNotes();
}

function update() {
const today = new Date().toISOString().split('T')[0];
document.getElementById('stat1').textContent = d.tasks.filter(t => !t.done && t.due === today).length;
const week = new Date();
week.setDate(week.getDate() - 7);
document.getElementById('stat2').textContent = d.workouts.filter(w => new Date(w.date) >= week).length;
const inc = d.budget.filter(b => b.type === 'income').reduce((s, b) => s + b.amt, 0);
const exp = d.budget.filter(b => b.type === 'expense').reduce((s, b) => s + b.amt, 0);
document.getElementById('stat3').textContent = '$' + (inc - exp).toFixed(0);
document.getElementById('stat4').textContent = d.notes.length;
}

function exp() {
const str = JSON.stringify(d, null, 2);
const blob = new Blob([str], { type: 'application/json' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = 'backup-' + new Date().toISOString().split('T')[0] + '.json';
a.click();
}

function imp(e) {
const file = e.target.files[0];
if (!file) return;
const r = new FileReader();
r.onload = function(ev) {
try {
d = JSON.parse(ev.target.result);
save();
alert('Imported!');
update();
} catch (err) {
alert('Error importing');
}
};
r.readAsText(file);
}

function clear() {
if (!confirm('Delete everything?')) return;
d = { tasks: [], workouts: [], budget: [], notes: [] };
save();
update();
alert('Cleared');
}

load();
</script>
</body>
</html>
